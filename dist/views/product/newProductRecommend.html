<div ng-controller=newProductRecommendCtrl class="new-product-recommend product container-fluid"><div class=header-view><div class="input-group col-md-5"><input type=text class="form-control input-products-search" placeholder=根据商品名称查询 ng-model=queryParams.queryName ng-keyup=productKeyup($event)><div class=input-group-btn><button type=button class="btn btn-default dropdown-toggle" ng-click=productSearch()>查询</button><drop-down btn-style="btn btn-default dropdown-toggle querytype-btn" list={{queryProductConfig.nameTypeData}} default-item={{queryProductConfig.nameTypeData[0]}} ng-model=queryNameConfig select=queryProductConfig.selectItem(item)></drop-down></div></div><button type=button class="btn btn-default btn-export-excel" ng-click=exportExcel()>导出EXCEL</button> <button type=button class="btn btn-default btn-add-newProduct" ng-click="openAddModal('modalProductList')">添加新品</button></div><div class=last-update-time>销售数据更新于：{{ lastUpdateTime | date:'yyyy-MM-dd HH:mm:ss' }}</div><table ng-table=tableParams class="table table-condensed table-bordered table-hover ngtable account-table table-mini" id=newProductRecommend><thead><th>序号</th><th>选择</th><th>商品编号</th><th>商品名称</th><th>入库日期</th><th>所属品类</th><th>商品单价</th><th>新品推荐次数</th><th>推荐捡货率</th><th>送货回仓率</th><th>出库率</th><th>库存</th><th>可用库存</th><th>编辑</th></thead><tr ng-repeat="pro in $data"><th>{{pro.index}}</th><td><input type=checkbox id=checkbox_{{pro.id}} class=chk_1 ng-click=updateSelection($event,pro)> <label for=checkbox_{{pro.id}}></label></td><th>{{pro.id}}</th><th>{{pro.productName}}</th><th>{{pro.createTime | date:'yyyy-MM-dd HH:mm:ss'}}</th><th>{{pro.category.categoryName}}</th><th>{{pro.price/100}}</th><th>{{pro.recommendTimes}}</th><th>{{pro.recommendRate}}</th><th>{{pro.deliveryBackRate}}</th><th>{{pro.shipmentRate}}</th><th>{{pro.stock}}</th><th>{{pro.availableStock}}</th><td><button type=button class="btn btn-default btn-sm" ng-click="toggleProductStatus(pro.id, pro.newRecommend)">{{pro.newRecommend == 1 ? '推荐中' : '待推荐'}}</button> <button type=button class="btn btn-danger btn-sm" ng-click=deleteNewProduct(pro.id)><span class="glyphicon glyphicon-trash"></span></button></td></tr></table><div><h5>名词解释</h5><h5>新品推荐次数：即设置推荐到拣货单的次数（以推荐后在拣货信息参考页面展示至关闭推荐为1次，即开即关不计次数）</h5><h5>推荐拣货率＝拣货单拣货次数／创建拣货单数＊100%（仅计算最近一次推荐期间数据）</h5><h5>送货回仓率＝送货修改回仓次数/送货次数＊100%</h5><h5>出货率＝销售商品数/送货商品数＊100%</h5></div><div id=exportExcelWrap class=hidden></div><script type=text/ng-template id=newProductDelete><!--创建一个局部视图，需要的时候引用它， 下面会用到--> <form name="deleteForm" novalidate ng-submit="newProductDeleteSave(deleteForm)"> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()"><span>&times;</span></button> <h4 class="modal-title">删除商品</h4> </div> <div class="modal-body"> <input type="hidden" ng-model="deleteForm.productId"/> <span style="font-family: Microsoft YaHei;font-size: 15px; color: red;"> 您确定要<u>删除</u>这条商品数据吗? </span> </div> <div class="modal-footer"> <button type="button" class="btn btn-warning" ng-click="cancel()">取消</button> <button type="submit" class="btn btn-primary">确认</button> </div> </form></script></div><script type=text/ng-template id=modalProductList><div class="modal-newproducts"> <div class="modal-header"> <button type="button" class="close" ng-click="cancel()"><span>&times;</span></button> <h4 class="modal-title" id="myModalLabel">新品上架</h4> </div> <div class="modal-body form-inline"> <div class="header-wrap"> <input type="text" class="form-control input-products-search" placeholder="根据商品名称查询" ng-keypress="keyPressSearchProduct($event,queryParams)" ng-model="queryParams.productName"> <button type="button" class="btn btn-primary btn-search" ng-click="searchProduct(queryParams)">查询</button> </div> <table ng-table="newProdcutsTable" class="table table-bordered table-mini"> <thead> <th>选择</th><th>商品编号</th><th>商品名称</th><th>售价</th><th>保质期</th> <th> <drop-down select="selectCategoryCallback(item)" default-desc="全部品类" btn-style="btn-link" list={{cateotyList}}></drop-down> </th> <th> <drop-down select="selectProfitCallback(item)" default-desc="全部利润等级" btn-style="btn-link" list={{profitList}}></drop-down> </th> <th>总销量</th> <th>库存</th> <th>可用库存</th> </thead> <tbody> <tr ng-repeat="product in $data"> <td> <input type="checkbox" ng-model=(product.select) ng-change="chkboxChange(product)"> </td> <td>{{product.skuCode}}</td> <td>{{product.productName}}</td> <td>{{product.price/100.0}}元</td> <td>{{product.expiryDate}}</td> <td>{{product.categoryName}}</td> <td>{{profitLevel.DESC[product.profitLevel]}}</td> <td>{{product.sales}}</td> <td>{{product.stock}}</td> <td>{{product.availStock}}</td> </tr> </tbody> </table> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" ng-click="cancel()">取消</button> <button type="button" class="btn btn-primary" ng-click="confirmAddNewProduct()">确定</button> </div> </div></script>